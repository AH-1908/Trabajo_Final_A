<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
	<link rel="stylesheet" href="estilos.css"> 
	<title>Reproductor Spotify</title>
</head>
<body>
    <div class="tab">
        <button class="tablinks" onclick="openService(event, 'Spotify')"><img src="spotify.png" alt="Spotify"> Spotify</button>
        <button class="tablinks" onclick="openService(event, 'YouTubeMusic')"><img src="ytmusic.png" alt="YouTube Music"> YouTube Music</button>
        <button class="tablinks" onclick="openService(event, 'iTunes')"><img src="itunes.png" alt="iTunes"> iTunes</button>
    </div>
    
    <div id="Spotify" class="tabcontent">
        <div class="search-container">
            <input type="text" id="searchQuery" placeholder="Search for an artist, playlist, or song">
            <div class="button-container">
                <button onclick="searchArtist()">Search Artist</button>
                <button onclick="searchPlaylist()">Search Playlist</button>
                <button onclick="searchTrack()">Search Track</button>
            </div>
        </div>
        <div id="results" class="results-container">
            <div class="column" id="playlistColumn">
                <h2>PLAYLISTS</h2>
                <iframe id="playlistIframe" src="" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
            </div>
            <div class="column" id="artistColumn">
                <h2>ARTIST</h2>
                <iframe id="artistIframe" src="" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
            </div>
        </div>
        <div id="trackResults">
            <h2>TRACKS</h2>
            <iframe id="trackIframe" src="" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
        </div>
    </div>
    
    <div id="YouTubeMusic" class="tabcontent">
        <div class="container">
            <h1>Buscar Videos Musicales en YouTube</h1>
            <input type="text" id="artistName" placeholder="Nombre del Artista">
            <button onclick="buscarVideos()">Buscar</button>
    
            <div id="itunesResults"></div>
        </div>
    
        <script>
            function buscarVideos() {
                const artistName = document.getElementById('artistName').value.trim();
                
                if (!artistName) {
                    alert('Por favor ingresa el nombre del artista.');
                    return;
                }
    
                const apiUrl = `https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&q=${encodeURIComponent(artistName + ' official music video')}&key=AIzaSyC88xiUVHfPJQ0Z7NvQ57l50kAhytxkDt4`;
    
                fetch(apiUrl)
                    .then(response => {
                        if (!response.ok) {
                            throw new Error(`Error ${response.status}: ${response.statusText}`);
                        }
                        return response.json();
                    })
                    .then(data => {
                        mostrarVideos(data.items, 'itunesResults');
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        alert('Ocurrió un error al buscar videos.');
                    });
            }
    
            function mostrarVideos(items, containerId) {
                const resultsContainer = document.getElementById(containerId);
                resultsContainer.innerHTML = '';
    
                items.forEach(item => {
                    const videoId = item.id.videoId;
                    const videoTitle = item.snippet.title;
                    const videoThumbnail = item.snippet.thumbnails.medium.url;
                    const videoLink = `https://www.youtube.com/watch?v=${videoId}`;
    
                    const videoHtml = `
                        <div class="video-container">
                <iframe 
                    width="100%" 
                    height="225" 
                    src="https://www.youtube.com/embed/${videoId}" 
                    frameborder="0" 
                    allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" 
                    allowfullscreen
                ></iframe>
                <div class="video-info">
                    <p class="video-title">${videoTitle}</p>
                    <a class="video-link" href="${videoLink}" target="_blank">Ver en YouTube</a>
                </div>
            </div>
        `;
                    resultsContainer.innerHTML += videoHtml;
                });
            }
        </script>    
    </div>
    
    <div id="iTunes" class="tabcontent">
        <h1>Buscar Letras de Canciones</h1>
        <form id="lyricsForm">
            <input type="text" id="songTitle" placeholder="Título de la canción" required>
            <input type="text" id="artistName" placeholder="Nombre del artista" required>
            <button type="submit">Buscar</button>
        </form>
        <div id="lyrics">
            <!-- Letras de la canción aparecerán aquí -->
        </div>
        <script>
            document.getElementById('lyricsForm').addEventListener('submit', async function (e) {
                e.preventDefault();
                const songTitle = document.getElementById('songTitle').value.trim();
                const artistName = document.getElementById('artistName').value.trim();
                const lyricsDiv = document.getElementById('lyrics');
                lyricsDiv.innerHTML = '<p>Buscando...</p>';
    
                if (!songTitle || !artistName) {
                    alert('Por favor ingresa el título de la canción y el nombre del artista.');
                    return;
                }
    
                try {
                    const response = await fetch(`https://api.lyrics.ovh/v1/${encodeURIComponent(artistName)}/${encodeURIComponent(songTitle)}`);
                    if (!response.ok) {
                        throw new Error(`Error ${response.status}: ${response.statusText}`);
                    }
                    const data = await response.json();
                    if (data.lyrics) {
                        lyricsDiv.innerHTML = `<pre>${data.lyrics}</pre>`;
                    } else {
                        lyricsDiv.innerHTML = '<p>Letras no encontradas.</p>';
                    }
                } catch (error) {
                    console.error('Error:', error);
                    lyricsDiv.innerHTML = `<p>Error al buscar letras. ${error.message}</p>`;
                }
            });
        </script>
    </div>
    
    
    <script src="script.js"></script>
</body>
</html>